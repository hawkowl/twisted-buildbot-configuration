# -*- makefile -*-

# This is a simple makefile which lives in a buildmaster/buildslave
# directory (next to the buildbot.tac file). It allows you to start/stop the
# master or slave by doing 'make start' or 'make stop'.

# The 'reconfig' target will tell a buildmaster to reload its config file.

SPP = PYTHONPATH=$(PYTHONPATH):~/BuildBot/support-slave

# the -n is to keep twistd from terminating, thus keeping the xvfb alive
# the --logfile is because -n implies "log to stdout"
start:
	$(SPP) nohup xvfb-run -e xvfb.errs twistd -n --no_save --logfile twistd.log -y buildbot.tac </dev/null >/dev/null &

stop:
	kill `cat twistd.pid`

reconfig:
	kill -HUP `cat twistd.pid`

log:
	tail -f twistd.log
